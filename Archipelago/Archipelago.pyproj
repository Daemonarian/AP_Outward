<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{6eb220a9-214d-4f4b-9943-358d490bf7ea}</ProjectGuid>
    <ProjectHome />
    <StartupFile>..\External\Archipelago\Generate.py</StartupFile>
    <SearchPath>
    </SearchPath>
    <WorkingDirectory>..\External\Archipelago</WorkingDirectory>
    <OutputPath>.</OutputPath>
    <ProjectTypeGuids>{888888a0-9f3d-457c-b088-3a5042f75d52}</ProjectTypeGuids>
    <LaunchProvider>Standard Python launcher</LaunchProvider>
    <InterpreterId>MSBuild|.venv|$(MSBuildProjectFullPath)</InterpreterId>
    <IsWindowsApplication>False</IsWindowsApplication>
    <EnableNativeCodeDebugging>False</EnableNativeCodeDebugging>
    <TestFramework>pytest</TestFramework>
    <UnitTestPattern>test*.py</UnitTestPattern>
    <UnitTestRootDirectory>.</UnitTestRootDirectory>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'" />
  <PropertyGroup Condition="'$(Configuration)' == 'Release'" />
  <PropertyGroup>
    <VisualStudioVersion Condition=" '$(VisualStudioVersion)' == '' ">10.0</VisualStudioVersion>
  </PropertyGroup>
  <PropertyGroup>
    <PythonVersion>3.12</PythonVersion>
    <PythonCommand>py -$(PythonVersion)</PythonCommand>
    <CodeGenProjectDir>..\SharedData</CodeGenProjectDir>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="setup.py" />
    <Compile Include="src\outward\common.py" />
    <Compile Include="src\outward\items.py" />
    <Compile Include="src\outward\locations.py" />
    <Compile Include="src\outward\options.py" />
    <Compile Include="src\outward\test\test_basic.py" />
    <Compile Include="src\outward\test\__init__.py" />
    <Compile Include="src\outward\__init__.py" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="src\" />
    <Folder Include="src\outward" />
    <Folder Include="src\outward\test" />
  </ItemGroup>
  <ItemGroup>
    <Interpreter Include=".venv\">
      <Id>.venv</Id>
      <Version>3.12</Version>
      <Description>.venv (Python 3.12.10)</Description>
      <InterpreterPath>Scripts\python.exe</InterpreterPath>
      <WindowsInterpreterPath>Scripts\pythonw.exe</WindowsInterpreterPath>
      <PathEnvironmentVariable>PYTHONPATH</PathEnvironmentVariable>
      <Architecture>X64</Architecture>
    </Interpreter>
  </ItemGroup>
  <ItemGroup>
    <Content Include="src\outward\Outward Definitive Edition.yaml" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\SharedData\SharedData.pyproj">
      <Name>SharedData</Name>
      <Project>{a53e8a7a-8da2-46b0-ad6d-0a08ef0f364b}</Project>
      <Private>True</Private>
      <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
    </ProjectReference>
  </ItemGroup>
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\Python Tools\Microsoft.PythonTools.targets" />
  <Target Name="CoreCompile" />
  <Target Name="CreateVenv" BeforeTargets="CoreCompile">
    <Exec Command="$(PythonCommand) -m venv --upgrade-deps @(Interpreter, ' ')" Condition="!Exists('@(Interpreter)')" />
  </Target>
  <Target Name="SetupVenv" AfterTargets="CreateVenv" BeforeTargets="CoreCompile">
    <RunPythonCommand Target="$(ProjectDir)$(WorkingDirectory)\ModuleUpdate.py" TargetType="script" Arguments="--yes" WorkingDirectory="$(WorkingDirectory)" ExecuteIn="none" />
  </Target>
  <Target Name="GenerateCode" BeforeTargets="CoreCompile">
    <Exec Command="&quot;$(CodeGenProjectDir)\.venv\Scripts\python.exe&quot; &quot;$(CodeGenProjectDir)\src\generate_archipelago_files.py&quot;" />
  </Target>
  <Target Name="SetupDebugEnvironment" AfterTargets="CoreCompile">
    <Message Text="Setting up custom run environment..." Importance="high" />
    <PropertyGroup>
      <MyGameName>outward</MyGameName>
      <LinkName>$(ProjectDir)$(WorkingDirectory)\worlds\$(MyGameName)</LinkName>
      <LinkTarget>$(ProjectDir)src\$(MyGameName)</LinkTarget>
    </PropertyGroup>
    <Exec Command="cmd.exe /c mklink /J &quot;$(LinkName)&quot; &quot;$(LinkTarget)&quot;" Condition="!Exists('$(LinkName)')" />
    <MakeDir Directories="$(WorkingDirectory)/Players" />
    <Copy SourceFiles="src\outward\Outward Definitive Edition.yaml" DestinationFolder="$(WorkingDirectory)/Players" />
  </Target>
</Project>